{"Activity Shortcuts":{"desc":"Registers activity shortcuts on the side menu","url":"https:\/\/cdn.rawgit.com\/Alorel\/avabur-improved\/\/modules\/activity-shortcuts.min.js","unloadable":true,"exec":"exec_module({name:\"Activity Shortcuts\",desc:\"Registers activity shortcuts on the side menu\",dependencies:{fn:[\"gh_url\",\"svg\"]},vars:{appends:[[\"sword-clash\",\"MobList\",\"Open Battles\"],[\"fishing\",\"Fishing\",\"Open Fishing\"],[\"log\",\"Woodcutting\",\"Open Woodcutting\"],[\"metal-bar\",\"Mining\",\"Open Mining\"],[\"stone-block\",\"#loadStonecutting\",\"Open Stonecutting\"]]},load:function(f,d){var h=d.spec.vars,e=f(\"<a href='javascript:;' class='avi-tip avi-menu-shortcut'\/>\"),g=f(\"#navWrapper\").find(\"ul\"),b;d.vars.li=f('<li class=\"avi-menu\"\/>');for(var c=0;c<h.appends.length;c++){b=e.clone().attr({\"data-delegate-click\":\"#load\"+h.appends[c][1],title:h.appends[c][2]});d.vars.li.append(b);d.dependencies.fn.svg(b,d.dependencies.fn.gh_url(\"res\/svg\/\"+h.appends[c][0]+\".svg\"))}g.append(d.vars.li);console.warn(\"Activity shortcuts loaded\")},unload:function(b,a){a.vars.li.remove()}});"},"Construction notifications":{"desc":"Creates toast & sound notifications when house construction finishes","url":"https:\/\/cdn.rawgit.com\/Alorel\/avabur-improved\/\/modules\/construction-notifications.min.js","unloadable":true,"exec":"exec_module({name:\"Construction notifications\",desc:\"Creates toast & sound notifications when house construction finishes\",dependencies:{fn:[\"parseTimeStringLong\",\"gh_url\",\"notification\"],classes:[\"AloTimer\",\"Interval\",\"SFX\"]},settings:{desc:{sound:\"Play a sound when construction finishes\",toast:\"Display a toast when construction finishes\"},defaults:{sound:true,toast:true},demo:{sound:function(c,b,a){a.vars.sfx.play()},toast:function(c,b,a){a.dependencies.fn.notification(\"Construction finished\",a.spec.name)}}},funcs:{click_house:function(){document.getElementById(\"header_house\").click()},notify:function(a){if(!a.vars.notified){if(a.settings.sound){a.vars.sfx.play()}if(a.settings.toast){a.dependencies.fn.notification(\"Construction finished\",a.spec.name,{onclick:a.spec.funcs.click_house})}}a.vars.notified=true}},load:function(c,a){function b(){c.ajax(\"\/house.php\",{global:false}).done(function(e){if(typeof(e.m)!==\"undefined\"){d(e.m)}})}function d(f){var e=new a.dependencies.classes.Interval(a.spec.name);e.clear();if(f.indexOf(\"available again\")!==-1){var g=new a.dependencies.classes.AloTimer(a.dependencies.fn.parseTimeStringLong(f));e.set(function(){if(g.isFinished()){e.clear();a.spec.funcs.notify(a)}else{a.vars.notified=false}},1000)}else{if(f.indexOf(\"are available\")!==-1){a.spec.funcs.notify(a)}else{setTimeout(b,1000)}}}a.vars={notified:false,house_requery:function(e,g,f){if(f.url.indexOf(\"house\")!==-1&&typeof(g.responseJSON)!==\"undefined\"&&typeof(g.responseJSON.m)!==\"undefined\"){d(g.responseJSON.m)}},sfx:new a.dependencies.classes.SFX(a.dependencies.fn.gh_url(\"res\/sfx\/circ_saw.wav\"))};c(document).ajaxComplete(a.vars.house_requery);b()},unload:function(b,a){b(document).unbind(\"ajaxComplete\",a.vars.house_requery)}});"},"House timers":{"desc":"Shows house construction timers without the need for an alarm clock","url":"https:\/\/cdn.rawgit.com\/Alorel\/avabur-improved\/\/modules\/house-timers.min.js","unloadable":true,"exec":"exec_module({name:\"House timers\",desc:\"Shows house construction timers without the need for an alarm clock\",dependencies:{fn:[\"parseTimeStringLong\"],classes:[\"AloTimer\",\"CssManager\",\"Interval\"]},load:function(e,d){var b=e(\"<div class='col-xs-6 col-md-12'\/>\");function c(){e.ajax(\"\/house.php\",{global:false}).done(function(g){if(typeof(g.m)!==\"undefined\"){f(g.m)}})}function a(g){g.clear();d.vars.paneSpan.addClass(\"avi-highlight\").html(e('<span data-delegate-click=\"#header_house\" style=\"cursor:pointer;text-decoration:underline;padding-right:5px\">Ready!<\/span>')).append(e(\"<a href='javascript:;'>(refresh)<\/a>\").click(c));d.applyGlobalHandlers(d.vars.paneSpan)}function f(h){var g=new d.dependencies.classes.Interval(d.spec.name);g.clear();if(h.indexOf(\"available again\")!==-1){var i=new d.dependencies.classes.AloTimer(d.dependencies.fn.parseTimeStringLong(h));g.set(function(){if(i.isFinished()){a(g)}else{d.vars.paneSpan.removeClass(\"avi-highlight\").text(i.toString())}},1000)}else{if(h.indexOf(\"are available\")!==-1){a(g)}else{setTimeout(c,3000)}}}d.vars={paneLabel:b.clone().addClass(\"col-lg-5 gold\").text(\"Construction:\"),paneSpan:e(\"<span>House unavailable<\/span>\"),house_requery:function(g,i,h){if(h.url.indexOf(\"house\")!==-1&&typeof(i.responseJSON)!==\"undefined\"&&typeof(i.responseJSON.m)!==\"undefined\"){f(i.responseJSON.m)}},css:(new d.dependencies.classes.CssManager()).setRules({\"#constructionNotifier,#houseTimerTable [data-typeid='Construction']\":{display:\"none !important\"}}).addToDOM()};d.vars.paneSpanContainer=b.clone().addClass(\"col-lg-7\").html(d.vars.paneSpan);e(\"#houseTimerInfo\").addClass(\"avi-force-block\");e(\"#houseTimerTable\").prepend(d.vars.paneLabel,d.vars.paneSpanContainer);e(document).ajaxComplete(d.vars.house_requery);e.ajax(\"\/house.php\",{global:false}).done(function(g){if(typeof(g.m)!==\"undefined\"){f(g.m)}})},unload:function(b,a){a.vars.paneLabel.remove();a.vars.paneSpanContainer.remove();a.vars.css.removeFromDOM();b(document).unbind(\"ajaxComplete\",a.vars.house_requery);b(\"#houseTimerInfo\").removeClass(\"avi-force-block\");(new a.dependencies.classes.Interval(a.spec.name)).clear()}});"},"Market tooltips":{"desc":"Performs a market price lookup when you hover a supported item","url":"https:\/\/cdn.rawgit.com\/Alorel\/avabur-improved\/\/modules\/market-tooltips.min.js","unloadable":true,"exec":"exec_module({name:\"Market tooltips\",desc:\"Performs a market price lookup when you hover a supported item\",dependencies:{fn:[\"analysePrice\",\"numberWithCommas\",\"openMarket\"],classes:[\"Request\"]},vars:{CACHE_TTL:1\/3600*60,html:'<table class=\"avi\" style=\"margin:auto\"><thead><tr><th colspan=\"3\">Current market price (1st page)<\/th><\/tr><tr><th>Low<\/th><th>Average<\/th><th>High<\/th><\/tr><\/thead><tbody><tr data-id=\"prices\"><td><\/td><td><\/td><td><\/td><\/tr><\/tbody><\/table>',tradeskill_mats:{\"Aberration Mind Source\":0,\"Animal Eye\":10,\"Animal Tongue\":11,\"Animal Tooth\":12,\"Animal Wing\":13,\"Beast Fur\":20,\"Beast Limb\":21,\"Beast Tooth\":22,\"Beast Wing\":23,\"Bird Nest\":122,\"Chunk of Coal\":130,\"Chunk of Graphite\":132,\"Construct Power\":30,\"Copper Ore\":133,\"Dragon Eye\":40,\"Dragon Scale\":41,\"Dragon Tail\":42,\"Elemental Energy\":50,\"Fish Fin\":112,\"Golden Apple\":121,Honeycomb:123,\"Humanoid Bone\":60,\"Humanoid Flesh\":61,\"Humanoid Limb\":62,\"Lucky Coin\":141,\"Magical Stone\":140,\"Octopus Ink\":110,\"Ooze Gel\":70,\"Plant Branch\":80,\"Plant Leaf\":81,\"Plant Root\":82,\"Plant Vine\":83,\"Protection Stone\":142,\"Rainbow Shard\":131,\"Rune Stone\":143,\"Serpent Eye\":90,\"Serpent Tail\":91,\"Serpent Tongue\":92,\"Squid Tentacle\":113,\"Turtle Shell\":111,\"Vermin Eye\":100,\"Vermin Tooth\":101,\"Yellow Pollen\":120}},load:function(f,d){function h(k){var l=d.dependencies.fn.analysePrice(k.l);d.vars.dom.low_currency.text(d.dependencies.fn.numberWithCommas(l.low));d.vars.dom.avg_currency.text(d.dependencies.fn.numberWithCommas(l.avg));d.vars.dom.high_currency.text(d.dependencies.fn.numberWithCommas(l.high))}function a(){b.click();d.dependencies.fn.openMarket(\"Ingredients\")}function j(){const l=f(this),k=l.text().trim();if(typeof(d.spec.vars.tradeskill_mats[k])===\"undefined\"){Toast.error(\"Failed to lookup \"+k+\": ID not found\")}else{(new d.dependencies.classes.Request(\"\/market.php\",d.spec.vars.CACHE_TTL)).post({type:\"ingredient\",page:0,q:0,ll:0,hl:0,st:d.spec.vars.tradeskill_mats[k]}).done(function(n){const p=l.attr(\"aria-describedby\"),m=f(\"#\"+p);if(p&&m.length){const q=d.dependencies.fn.analysePrice(n.l),o=m.find(\"tr[data-id=prices]>td\");o.first().text(d.dependencies.fn.numberWithCommas(q.low)).next().text(d.dependencies.fn.numberWithCommas(q.avg)).next().text(d.dependencies.fn.numberWithCommas(q.high))}})}}function i(){const m=f(this),l=m.text().trim(),k=f(\"<span>\"+l+\"<\/span>\");m.html(k);k.popover({title:l,html:true,trigger:\"hover\",container:\"body\",viewport:{selector:\"body\",padding:0},placement:\"auto right\",content:f(d.spec.vars.html)});k.mouseenter(j).css(\"cursor\",\"pointer\").click(a)}var g=f(\"#currencyTooltipMarketable\"),c=f(\"#currencyTooltip\"),b=f(\"#modalBackground\"),e;d.vars.dom={};d.vars.observers={currency_tooltips:new MutationObserver(function(l){if(l.length&&g.is(\":visible\")){const k=g.attr(\"class\"),m=k.replace(\"crystals\",\"premium\").replace(\"materials\",\"weapon_scraps\").replace(\"fragments\",\"gem_fragments\");d.vars.dom.row_currency.attr(\"class\",k);if(k===\"gold\"){e.text(\"N\/A\")}else{e.text(\" \");(new d.dependencies.classes.Request(\"\/market.php\",d.spec.vars.CACHE_TTL)).post({type:\"currency\",page:0,st:m}).done(h)}}}),inventory_table:new MutationObserver(function(l){for(var m=0;m<l.length;m++){if(l[m].addedNodes.length){for(var o=0;o<l[m].addedNodes.length;o++){if(l[m].addedNodes[o] instanceof HTMLTableSectionElement){const k=f(l[m].addedNodes[o]);if(k.find(\"th:contains(Ingredient)\").length){k.find(\">tr>[data-th=Item]\").each(i)}break}}break}}})};d.vars.dom.table_currency=f(d.spec.vars.html);d.vars.dom.row_currency=d.vars.dom.table_currency.find(\"tr[data-id=prices]\");e=d.vars.dom.row_currency.find(\">td\");d.vars.dom.low_currency=e.first();d.vars.dom.avg_currency=d.vars.dom.low_currency.next();d.vars.dom.high_currency=d.vars.dom.avg_currency.next();c.append(d.vars.dom.table_currency);d.vars.observers.currency_tooltips.observe(c[0],{attributes:true});d.vars.observers.inventory_table.observe(document.querySelector(\"#inventoryTable\"),{attributes:true,childList:true,characterData:true})},unload:function(d,c){if(typeof(c.vars.dom)!==\"undefined\"){for(var b in c.vars.dom){if(c.vars.dom.hasOwnProperty(b)){c.vars.dom[b].remove();delete c.vars.dom[b]}}}if(typeof(c.vars.observers)!==\"undefined\"){for(var a in c.vars.observers){if(c.vars.observers.hasOwnProperty(a)){c.vars.observers[a].disconnect()}}}}});"}}